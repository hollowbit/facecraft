SET DB_CLOSE_DELAY -1;         
;              
CREATE USER IF NOT EXISTS SA SALT '4139f7acfb8fa0bb' HASH 'b1d7e5fa7f8f409655454e418ac5d9cb208657100ae7b47d5046f5165e6c260c' ADMIN;            
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_0896C8C7_52CC_4E60_9732_439D45E2CCE7 START WITH 1 BELONGS_TO_TABLE;     
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_83ACE419_05B7_406D_842A_CB17ADCFB526 START WITH 1 BELONGS_TO_TABLE;     
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_889506F2_DBCA_4291_8190_7A9932BA5C6D START WITH 2 BELONGS_TO_TABLE;     
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_1F5AE36B_FDB8_4625_A74E_3F317DD65D1F START WITH 1 BELONGS_TO_TABLE;     
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_23E2185F_DA7F_4203_9009_BE7F381F8CB5 START WITH 4 BELONGS_TO_TABLE;     
CREATE MEMORY TABLE PUBLIC.CONSOLE_OUTPUT(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_83ACE419_05B7_406D_842A_CB17ADCFB526) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_83ACE419_05B7_406D_842A_CB17ADCFB526,
    MESSAGE VARCHAR(255),
    SERVER VARCHAR(255)
);              
ALTER TABLE PUBLIC.CONSOLE_OUTPUT ADD CONSTRAINT PUBLIC.CONSTRAINT_E PRIMARY KEY(ID);          
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CONSOLE_OUTPUT;           
CREATE MEMORY TABLE PUBLIC.EVENTS(
    EVENT_ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_0896C8C7_52CC_4E60_9732_439D45E2CCE7) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_0896C8C7_52CC_4E60_9732_439D45E2CCE7,
    DATE TIMESTAMP,
    DESCRIPTION VARCHAR(255),
    TITLE VARCHAR(255),
    SERVER_ID VARCHAR(255)
);             
ALTER TABLE PUBLIC.EVENTS ADD CONSTRAINT PUBLIC.CONSTRAINT_7 PRIMARY KEY(EVENT_ID);            
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.EVENTS;   
CREATE MEMORY TABLE PUBLIC.INVITES(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_889506F2_DBCA_4291_8190_7A9932BA5C6D) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_889506F2_DBCA_4291_8190_7A9932BA5C6D,
    INVITED_BY_ID BIGINT NOT NULL,
    INVITED_USER_ID BIGINT NOT NULL,
    SERVER_ID VARCHAR(255)
);    
ALTER TABLE PUBLIC.INVITES ADD CONSTRAINT PUBLIC.CONSTRAINT_9 PRIMARY KEY(ID); 
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.INVITES;  
INSERT INTO PUBLIC.INVITES(ID, INVITED_BY_ID, INVITED_USER_ID, SERVER_ID) VALUES
(1, 1, 2, '10.39.167.15');    
CREATE MEMORY TABLE PUBLIC.MESSAGES(
    MESSAGE_ID VARCHAR(255) DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_1F5AE36B_FDB8_4625_A74E_3F317DD65D1F) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_1F5AE36B_FDB8_4625_A74E_3F317DD65D1F,
    DATE VARCHAR(255),
    MESSAGE VARCHAR(255),
    SENDER_TYPE VARCHAR(255),
    SERVER VARCHAR(255),
    USERNAME VARCHAR(255)
);      
ALTER TABLE PUBLIC.MESSAGES ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(MESSAGE_ID);        
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.MESSAGES; 
CREATE MEMORY TABLE PUBLIC.SERVERS(
    ADDRESS VARCHAR(255) NOT NULL,
    NAME VARCHAR(255),
    PASSWORD VARCHAR(255)
);     
ALTER TABLE PUBLIC.SERVERS ADD CONSTRAINT PUBLIC.CONSTRAINT_A PRIMARY KEY(ADDRESS);            
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.SERVERS;  
INSERT INTO PUBLIC.SERVERS(ADDRESS, NAME, PASSWORD) VALUES
('10.39.167.15', 'hollowbit.net', 'Test'),
('10.39.167.16', 'testserver.net', 'Test');              
CREATE MEMORY TABLE PUBLIC.SERVERS_MEMBERS(
    SERVERS_PART_OF_ADDRESS VARCHAR(255) NOT NULL,
    MEMBERS_USER_ID BIGINT NOT NULL
);          
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.SERVERS_MEMBERS;          
CREATE MEMORY TABLE PUBLIC.SERVERS_OWNERS(
    SERVERS_OWNED_ADDRESS VARCHAR(255) NOT NULL,
    OWNERS_USER_ID BIGINT NOT NULL
);              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.SERVERS_OWNERS;           
CREATE MEMORY TABLE PUBLIC.USERS(
    USER_ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_23E2185F_DA7F_4203_9009_BE7F381F8CB5) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_23E2185F_DA7F_4203_9009_BE7F381F8CB5,
    DEVICE_TOKEN VARCHAR(255),
    PASSWORD VARCHAR(255),
    USERNAME VARCHAR(255)
);
ALTER TABLE PUBLIC.USERS ADD CONSTRAINT PUBLIC.CONSTRAINT_4 PRIMARY KEY(USER_ID);              
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.USERS;    
INSERT INTO PUBLIC.USERS(USER_ID, DEVICE_TOKEN, PASSWORD, USERNAME) VALUES
(1, NULL, 'a', 'Alex'),
(2, NULL, 'Password123', 'JJ'),
(3, NULL, 'Password123', 'Ahmed');          
ALTER TABLE PUBLIC.SERVERS_MEMBERS ADD CONSTRAINT PUBLIC.FK2N9M1QO4P8FKU9I9NJ9MPVJ3P FOREIGN KEY(SERVERS_PART_OF_ADDRESS) REFERENCES PUBLIC.SERVERS(ADDRESS) NOCHECK;          
ALTER TABLE PUBLIC.INVITES ADD CONSTRAINT PUBLIC.FKG3NMA3OG6XH0AQTNB75434Q3C FOREIGN KEY(SERVER_ID) REFERENCES PUBLIC.SERVERS(ADDRESS) ON DELETE CASCADE NOCHECK;              
ALTER TABLE PUBLIC.SERVERS_OWNERS ADD CONSTRAINT PUBLIC.FK5EUIQGED78IT3YABQOV2NWOH6 FOREIGN KEY(OWNERS_USER_ID) REFERENCES PUBLIC.USERS(USER_ID) NOCHECK;      
ALTER TABLE PUBLIC.SERVERS_OWNERS ADD CONSTRAINT PUBLIC.FK81F09VXAW8M9H0QTYT4RBTU5J FOREIGN KEY(SERVERS_OWNED_ADDRESS) REFERENCES PUBLIC.SERVERS(ADDRESS) NOCHECK;             
ALTER TABLE PUBLIC.CONSOLE_OUTPUT ADD CONSTRAINT PUBLIC.FKE7P4RT1PHCFEMESXQ51XWWK25 FOREIGN KEY(SERVER) REFERENCES PUBLIC.SERVERS(ADDRESS) NOCHECK;            
ALTER TABLE PUBLIC.SERVERS_MEMBERS ADD CONSTRAINT PUBLIC.FKLOWP7A9HI5270RSI8E3E5SFUD FOREIGN KEY(MEMBERS_USER_ID) REFERENCES PUBLIC.USERS(USER_ID) NOCHECK;    
ALTER TABLE PUBLIC.INVITES ADD CONSTRAINT PUBLIC.FKKOSD49KQYD9GPNT40AQBN6NX9 FOREIGN KEY(INVITED_USER_ID) REFERENCES PUBLIC.USERS(USER_ID) NOCHECK;            
ALTER TABLE PUBLIC.EVENTS ADD CONSTRAINT PUBLIC.FKAXSXSY6UE6MTE7HLQ34GDH4B FOREIGN KEY(SERVER_ID) REFERENCES PUBLIC.SERVERS(ADDRESS) ON DELETE CASCADE NOCHECK;
ALTER TABLE PUBLIC.INVITES ADD CONSTRAINT PUBLIC.FK5G7784RNLDUUIPXXE3S44VF6R FOREIGN KEY(INVITED_BY_ID) REFERENCES PUBLIC.USERS(USER_ID) NOCHECK;              
